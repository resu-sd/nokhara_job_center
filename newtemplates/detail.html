{% extends 'base.html' %}

{% block content %}
<section class="py-5 text-white" style="background: linear-gradient(135deg, #3f51b5 0%, #283593 100%);">
    <div class="container py-4">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-2">
                <li class="breadcrumb-item"><a href="/" class="text-white-50 text-decoration-none">Home</a></li>
                <li class="breadcrumb-item"><a href="{% url "search" %}" class="text-white-50 text-decoration-none">Jobs</a></li>
                <li class="breadcrumb-item active text-white" aria-current="page">{{ job.title }}</li>
            </ol>
        </nav>
        <h1 class="display-5 fw-bold">{{ job.title|title }}</h1>
        <div class="d-flex flex-wrap gap-3 opacity-75 mt-2">
            <span><i class="fas fa-building me-2"></i>{{ job.company_name|default:"Pokhara Job Center" }}</span>
            <span><i class="fas fa-map-marker-alt me-2"></i>{{ job.location }}</span>
        </div>
    </div>
</section>

<div class="container mt-n4" style="margin-top: -30px;">
    <div class="row g-4">
        <div class="col-lg-8">
            <div class="card shadow-sm border-0 rounded-4 overflow-hidden mb-4">
                <div class="card-body p-4 p-md-5">
                    <div class="row g-4 bg-light rounded-3 p-3 mb-5 border">
                        <div class="col-6 col-md-3">
                            <small class="text-muted d-block">Salary Range</small>
                            <span class="fw-bold">Rs {{ job.salary_range }}</span>
                        </div>
                        <div class="col-6 col-md-3">
                            <small class="text-muted d-block">Job Status</small>
                            <span class="fw-bold text-primary">{{ job.job_type }}</span>
                        </div>
                        <div class="col-6 col-md-3">
                            <small class="text-muted d-block">Published</small>
                            <span class="fw-bold">{{ job.created_at }}</span>
                        </div>
                        <div class="col-6 col-md-3">
                            <small class="text-muted d-block">Expiry Date</small>
                            <span class="fw-bold text-danger">{{ job.expiry_date }}</span>
                        </div>
                    </div>

                    <h4 class="fw-bold mb-3 mt-4 text-primary border-bottom pb-2">Job Description</h4>
                    <p class="text-secondary leading-relaxed">{{ job.description|linebreaks }}</p>

                    <h4 class="fw-bold mb-3 mt-5 text-primary border-bottom pb-2">Requirements</h4>
                    <ul class="list-group list-group-flush mb-4">
                        {% for requirement in requirements %}
                        <li class="list-group-item px-0 border-0 d-flex align-items-start bg-transparent">
                            <i class="fas fa-check-circle text-success mt-1 me-3"></i>
                            <span>{{ requirement }}</span>
                        </li>
                        {% endfor %}
                    </ul>

                    <h4 class="fw-bold mb-3 mt-5 text-primary border-bottom pb-2">Benefits</h4>
                    <div class="d-flex flex-wrap gap-2">
                        {% for benefit in benefits %}
                        <span class="badge bg-primary-subtle text-primary border border-primary-subtle rounded-pill px-3 py-2">{{ benefit }}</span>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card border-0 shadow-sm rounded-4 p-4 sticky-top" style="top: 100px; z-index: 10;">
                <h5 class="fw-bold mb-4">Interested in this role?</h5>
                <button class="btn btn-primary btn-lg w-100 py-3 mb-3 shadow" data-bs-toggle="modal" data-bs-target="#applyMainModal">
                    Apply Now
                </button>
                <div class="text-center">
                    <p class="small text-muted mb-0">Job ID: #{{ job.id }}</p>
                    <hr>
                    <p class="small text-secondary">Share this job with your friends</p>
                    <div class="d-flex justify-content-center gap-3">
                        <a href="#" class="btn btn-outline-light text-dark btn-sm rounded-circle shadow-sm"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="btn btn-outline-light text-dark btn-sm rounded-circle shadow-sm"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="applyMainModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 rounded-4 shadow">
            <div class="modal-header border-0 pb-0">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center p-5">
                <h3 class="fw-bold mb-4">How would you like to apply?</h3>
                <div class="d-grid gap-3">
                    <button class="btn btn-outline-primary btn-lg py-3 rounded-3" data-bs-target="#applyOnlineModal" data-bs-toggle="modal">
                        <i class="fas fa-paper-plane me-2"></i> Apply Online
                    </button>
                    <button class="btn btn-outline-dark btn-lg py-3 rounded-3" data-bs-target="#visitOfficeModal" data-bs-toggle="modal">
                        <i class="fas fa-map-marker-alt me-2"></i> Visit Office
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="applyOnlineModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 rounded-4 shadow">
            <div class="modal-header bg-primary text-white p-4">
                <h5 class="modal-title fw-bold">Online Application</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form  method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="modal-body p-4">
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Full Name</label>
                        <input type="text" name="full_name" class="form-control bg-light border-0 py-2" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Phone Number</label>
                        <input type="tel" name="phone" class="form-control bg-light border-0 py-2" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Address</label>
                        <input type="text" name="address" class="form-control bg-light border-0 py-2" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label small fw-bold">Upload CV (PDF/DOC)</label>
                        <input type="file" name="cv" class="form-control bg-light border-0" required>
                    </div>
                </div>
                <div class="modal-footer border-0 p-4 pt-0">
                    <button type="submit" class="btn btn-primary w-100 py-3">Submit Application</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="visitOfficeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 rounded-4 shadow">
            <div class="modal-header bg-dark text-white p-4">
                <h5 class="modal-title fw-bold">OFFICE VISIT INSTRUCTIONS</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-4">
                <div class="mb-4">
                    <p class="mb-1 text-muted small text-uppercase fw-bold">Job Reference</p>
                    <p class="fw-bold text-primary mb-0">Job ID: {{ job.id }}</p>
                </div>
                
                <div class="mb-4">
                    <p class="mb-1 text-muted small text-uppercase fw-bold">Office Hours & Location</p>
                    <p class="mb-0 fw-bold">10:00 AM - 5:00 PM</p>
                    <p class="text-secondary mb-0">Pokhara Jobs Center</p>
                    <p class="text-secondary">Amarsingh Chowk, Pokhara</p>
                </div>

                <div class="bg-warning-subtle border border-warning-subtle p-3 rounded-3">
                    <p class="mb-1 fw-bold text-warning-emphasis"><i class="fas fa-file-alt me-2"></i>Documents Required</p>
                    <p class="small mb-0 text-dark-emphasis">Please bring your updated CV and relevant citizenship or academic documents.</p>
                </div>
            </div>
            <div class="modal-footer border-0">
                <button type="button" class="btn btn-dark w-100 py-3" data-bs-dismiss="modal">I Understand</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}